<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/template.css">
    <link rel="stylesheet" href="css/quan-ly-khoan-thu-content.css">
    <link rel='stylesheet' href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css'>
    <title>Quan ly Khoan thu</title>
</head>
<body>

<div th:replace="~{/fragments/sidebar :: sidebar}" class="sidebar"> <!-- Sidebar placeholder --> </div>
<!--<div class="container">-->
<div class="mainboard">
    <div class="header-content">
        <h1> Quản lý khoản thu </h1> <br>
    </div>
    <div class="main-content" id="maincontent">
        <h2 class="text-center my-4">Danh sách khoản thu</h2>
        <hr>
        <div class="searchbar" style="display: flex; justify-content: center; width: 100%;">
            <input type="search" placeholder="Tìm kiếm" id="keyword" name="keyword" required style="width: 80%; padding: 5px 10px;">
            <button class="search-button" type="submit" style="padding: 5px 10px; margin-left: 10px;"> <i class='bx bx-search'></i> </button>
        </div>
        <br>

        <a th:href="@{/create}" title="Tạo khoản thu mới" style="text-decoration: none; padding: 10px 20px; background: linear-gradient(to right, #007e99, #005f6b); color: white; border-radius: 5px; display: inline-block;">Tạo khoản thu</a>

        <table class="payment-table">
        <thead>
        <tr>
            <th>ID</th>
            <th>Tên khoản thu</th>
            <th>Số tiền</th>
            <th>Ngày tạo</th>
            <th>Hạn chót</th>
            <th>Bắt buộc</th>
            <th>Người tạo</th>
            <th>Hành động</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="khoanthu : ${khoanthu_list}">
            <td th:text="${khoanthu.id}"></td>
            <td th:text="${khoanthu.tenkhoanthu}"></td>
            <td class="money" th:text="${khoanthu.sotien}"></td>

            <td th:text="${#temporals.format(khoanthu.ngaytao, 'yyyy-MM-dd HH:mm:ss')}"></td>
            <td th:text="${#temporals.format(khoanthu.hanchot, 'yyyy-MM-dd HH:mm:ss')}"></td>

            <td th:text="${khoanthu.batbuoc == 'Có' ? 'Có' : 'Không'}"></td>
            <td th:text="${khoanthu.nguoitao}"></td>
            <td>
                <a th:href="@{/edit(id=${khoanthu.id})}"

                   style="
       display: inline-block;
       padding: 8px 16px;
       color: white;
       background-color:#2ecc71;
       text-decoration: none;
       border-radius: 4px;
       text-align: center;">
                    <i class='bx bxs-edit-alt' style="color: white;"></i>
                    Sửa
                </a>


                  <a th:href="@{/delete(id=${khoanthu.id})}"
                   onclick="return confirm('Bạn có chắc chắn muốn xóa khoản thu này không?')"
                   style="
       display: inline-block;
       padding: 8px 16px;
       color: white;
       background-color: #e74c3c;
       text-decoration: none;
       border-radius: 4px;
       text-align: center;">
                      <i class='bx bxs-trash-alt' style="color: white;"></i>
                    Xóa
                </a>


            </td>
        </tr>
        </tbody>
    </table>
    </div>
</div>
<script>
    document.querySelectorAll('.money').forEach(function(cell) {
        var amount = parseInt(cell.textContent.trim(), 10);
        if (!isNaN(amount)) {
            var formattedAmount = amount.toLocaleString();
            cell.textContent = formattedAmount;
        }
    });
</script>
</body>
<script src="js/menu-toggle.js"> </script>
</html>


